<div class="services-header">
    <h2>–ú–æ–∏ —Å–ª—É–∂–±—ã</h2>
    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ —Å–ª—É–∂–±–∞–º–∏</p>
</div>

<% if @services.empty? %>
    <div class="empty-state">
        <h3>üö´ –ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–ª—É–∂–±</h3>
        <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é —Å–ª—É–∂–±—É —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</p>
        <a href="/services/new" class="btn btn-secondary">–î–æ–±–∞–≤–∏—Ç—å —Å–ª—É–∂–±—É</a>
    </div>
<% else %>
    <div class="services-grid">
        <% @services.each do |service| %>
            <div class="service-card <%= service.status %>">
                <div class="service-header">
                    <div class="service-name">üì¶ <%= service.name %></div>
                    <div class="service-status <%= "status-#{service.status}" %>">
                        <%= service.status == 'running' ? 'üü¢ –ó–∞–ø—É—â–µ–Ω–∞' : 'üî¥ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞' %>
                    </div>
                </div>
                
                <div class="service-info">
                    <% if service.description.present? %>
                        <div class="info-row">
                            <span class="info-label">–û–ø–∏—Å–∞–Ω–∏–µ:</span>
                            <span><%= service.description %></span>
                        </div>
                    <% end %>
                    
                    <div class="info-row">
                        <span class="info-label">–ö–æ–º–∞–Ω–¥–∞:</span>
                        <span class="command"><%= service.command %></span>
                    </div>
                    
                    <% if service.port.present? %>
                        <div class="info-row">
                            <span class="info-label">–ü–æ—Ä—Ç:</span>
                            <span><%= service.port %></span>
                        </div>
                    <% end %>
                    
                    <% if service.pid %>
                        <div class="info-row">
                            <span class="info-label">PID:</span>
                            <span><%= service.pid %></span>
                        </div>
                    <% end %>
                    
                    <% if service.last_started %>
                        <div class="info-row">
                            <span class="info-label">–ó–∞–ø—É—â–µ–Ω–∞:</span>
                            <span><%= service.last_started.localtime.strftime('%d.%m.%Y %H:%M') %></span>
                        </div>
                    <% end %>
                    
                    <% if service.bat_filename %>
                        <div class="info-row">
                            <span class="info-label">BAT —Ñ–∞–π–ª:</span>
                            <span><%= service.bat_filename %></span>
                        </div>
                    <% end %>
                </div>
                
                <div class="actions">
                    <% if service.status == 'stopped' %>
                        <form action="/services/<%= service.id %>/start" method="post" style="display: inline;">
                            <button type="submit" class="btn btn-start">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                        </form>
                    <% else %>
                        <form action="/services/<%= service.id %>/stop" method="post" style="display: inline;">
                            <button type="submit" class="btn btn-stop">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                        </form>
                    <% end %>
                    
                    <a href="/services/<%= service.id %>/logs" class="btn btn-log">üìã –õ–æ–≥–∏</a>
                    <a href="/services/<%= service.id %>/edit" class="btn btn-edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form action="/services/<%= service.id %>/delete" method="post" style="display: inline;">
                        <button type="submit" class="btn btn-delete">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </div>
            </div>
        <% end %>
    </div>
    
    <div class="stats">
        <p>–í—Å–µ–≥–æ —Å–ª—É–∂–±: <strong><%= @services.count %></strong> | 
           –ó–∞–ø—É—â–µ–Ω–æ: <strong><%= @services.where(status: 'running').count %></strong> | 
           –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: <strong><%= @services.where(status: 'stopped').count %></strong></p>
    </div>
<% end %>